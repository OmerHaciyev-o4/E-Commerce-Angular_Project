{"ast":null,"code":"import { CookieService } from 'ngx-cookie-service';\nimport { AuthService } from '../auth/auth.service';\nimport { ColorService } from '../colors/color.service';\nimport { AlertifyService } from '../services/alertify.service';\nimport { CardService } from './cards.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth/auth.service\";\nimport * as i2 from \"ngx-cookie-service\";\nimport * as i3 from \"../colors/color.service\";\nimport * as i4 from \"./cards.service\";\nimport * as i5 from \"../services/alertify.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../shared/preload/preload.component\";\n\nfunction CardsComponent_app_preload_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-preload\");\n  }\n}\n\nfunction CardsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5);\n    i0.ɵɵtext(2, \"You cannot order. (Admin)\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction CardsComponent_div_4_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"div\", 31)(3, \"div\", 16)(4, \"div\", 32)(5, \"div\", 33);\n    i0.ɵɵelement(6, \"img\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 35)(8, \"div\", 36)(9, \"div\", 10)(10, \"h6\", 11);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 23)(13, \"small\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 10)(16, \"small\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 10);\n    i0.ɵɵtext(20, \"Count: \");\n    i0.ɵɵelementStart(21, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function CardsComponent_div_4_div_15_Template_input_ngModelChange_21_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const card_r4 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(card_r4.count = $event);\n    })(\"ngModelChange\", function CardsComponent_div_4_div_15_Template_input_ngModelChange_21_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.productCountChange());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 10)(23, \"h6\", 11);\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"currency\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(26, \"hr\", 38);\n    i0.ɵɵelementStart(27, \"div\", 29)(28, \"div\", 39)(29, \"small\", 40);\n    i0.ɵɵlistener(\"click\", function CardsComponent_div_4_div_15_Template_small_click_29_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const i_r5 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.deleteCard(i_r5));\n    });\n    i0.ɵɵelementStart(30, \"span\");\n    i0.ɵɵelement(31, \"i\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"Delete Order\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n\n  if (rf & 2) {\n    const card_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"mt-4\", i_r5 > 0);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"src\", card_r4.product.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(card_r4.product.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Color: \", ctx_r3.colors.get(card_r4.product.colorId), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Price: \", i0.ɵɵpipeBind1(18, 8, card_r4.product.price), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", card_r4.count);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 10, card_r4.count * card_r4.product.price));\n  }\n}\n\nfunction CardsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"div\", 8)(3, \"div\", 9)(4, \"div\", 10)(5, \"h4\", 11);\n    i0.ɵɵtext(6, \"Welcome to Card Panel: \");\n    i0.ɵɵelementStart(7, \"span\", 12);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \" .\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 13);\n    i0.ɵɵelement(11, \"img\", 14);\n    i0.ɵɵelementStart(12, \"p\", 15);\n    i0.ɵɵtext(13, \"Watches For Everyone\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"div\", 16);\n    i0.ɵɵtemplate(15, CardsComponent_div_4_div_15_Template, 33, 12, \"div\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 18)(17, \"div\", 19)(18, \"div\", 20)(19, \"div\", 21);\n    i0.ɵɵelement(20, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 23)(22, \"h2\", 24);\n    i0.ɵɵtext(23, \"Must Be Paid\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 25)(25, \"h1\", 26);\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"currency\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"div\", 27)(29, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function CardsComponent_div_4_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.ordering());\n    });\n    i0.ɵɵtext(30, \"Ordering\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.user.email, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cards);\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(27, 3, ctx_r2.total));\n  }\n}\n\nexport let CardsComponent = /*#__PURE__*/(() => {\n  class CardsComponent {\n    constructor(authService, cookieService, colorService, cardService, alertifyService, router) {\n      this.authService = authService;\n      this.cookieService = cookieService;\n      this.colorService = colorService;\n      this.cardService = cardService;\n      this.alertifyService = alertifyService;\n      this.router = router;\n      this.user = null;\n      this.userBase = null;\n      this.isUserCheck = false;\n      this.cards = null;\n      this.colors = null;\n      this.total = 0;\n      this.preload = false;\n    }\n\n    ngOnInit() {\n      this.user = JSON.parse(localStorage.getItem(\"user\"));\n      this.userBase = JSON.parse(localStorage.getItem(\"userBase\"));\n\n      if (this.userBase) {\n        var JSONResult = this.cookieService.get(`${this.user.email}cards`);\n        this.cards = JSONResult == \"\" ? null : JSON.parse(JSONResult);\n\n        if (this.cards) {\n          for (let i = 0; i < this.cards.length; i++) {\n            const card = this.cards[i];\n            const total = card.count * card.product.price;\n            this.total += total;\n          }\n        }\n      }\n\n      if (this.userBase.role == \"admin\") {\n        this.isUserCheck = true;\n      }\n\n      this.colorService.getColors().subscribe(response => {\n        this.colors = new Map();\n\n        for (let i = 0; i < response.length; i++) {\n          const color = response[i];\n          this.colors.set(color.id, color.name);\n        }\n      });\n    }\n\n    productCountChange() {\n      var indexArr = [];\n      this.total = 0;\n\n      for (let i = 0; i < this.cards.length; i++) {\n        const card = this.cards[i];\n\n        if (card.count > 0) {\n          const total = card.count * card.product.price;\n          this.total += total;\n        } else {\n          indexArr.push(i);\n        }\n      }\n\n      for (let i = 0; i < indexArr.length; i++) {\n        const index = indexArr[i];\n        this.cards.splice(index, index + 1);\n      }\n\n      this.cookieService.set(`${this.user.email}cards`, JSON.stringify(this.cards));\n    }\n\n    deleteCard(index) {\n      this.cards.splice(index, index + 1);\n      this.productCountChange();\n    }\n\n    ordering() {\n      this.preload = true;\n      var orderedCardCount = 0;\n\n      for (let i = 0; i < this.cards.length; i++) {\n        const card = this.cards[i];\n        this.cardService.ordering(card, this.user.id).subscribe(response => {\n          orderedCardCount++;\n        });\n      }\n\n      var timer = setInterval((orderedCardCount, cardslength, cookieService, userEmail, preload) => {\n        if (orderedCardCount != cardslength) {\n          cookieService.set(`${userEmail}cards`, null);\n          preload = false;\n          this.alertifyService.success(\"All orders have been shipped.\");\n          this.router.navigate(['/products']);\n          clearInterval(timer);\n        }\n      }, 100, orderedCardCount, this.cards.length, this.cookieService, this.user.email, this.preload, this);\n    }\n\n  }\n\n  CardsComponent.ɵfac = function CardsComponent_Factory(t) {\n    return new (t || CardsComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.ColorService), i0.ɵɵdirectiveInject(i4.CardService), i0.ɵɵdirectiveInject(i5.AlertifyService), i0.ɵɵdirectiveInject(i6.Router));\n  };\n\n  CardsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CardsComponent,\n    selectors: [[\"app-cards\"]],\n    features: [i0.ɵɵProvidersFeature([AuthService, CookieService, ColorService, CardService, AlertifyService])],\n    decls: 5,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [1, \"w-100\", \"text-center\", \"mt-4\", \"text-bold\"], [\"class\", \"w-100\", 4, \"ngIf\"], [\"class\", \"container-fluid my-4 d-flex justify-content-center\", 4, \"ngIf\"], [1, \"w-100\"], [1, \"alert\", \"alert-warning\"], [1, \"container-fluid\", \"my-4\", \"d-flex\", \"justify-content-center\"], [1, \"card\", \"card-1\"], [1, \"card-header\", \"bg-white\"], [1, \"media\", \"flex-sm-row\", \"flex-column-reverse\", \"justify-content-between\"], [1, \"col\", \"my-auto\"], [1, \"mb-0\"], [1, \"change-color\"], [1, \"col-auto\", \"text-center\", \"my-auto\", \"pl-0\", \"pt-sm-4\"], [\"src\", \"../../assets/images/favicon.png\", \"width\", \"115\", \"height\", \"115\", 1, \"img-fluid\", \"my-auto\", \"align-items-center\", \"mb-0\", \"pt-3\"], [1, \"mb-4\", \"pt-0\", \"Glasses\"], [1, \"card-body\"], [\"class\", \"row\", 3, \"mt-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-footer\"], [1, \"jumbotron-fluid\"], [1, \"row\", \"justify-content-between\"], [1, \"col-sm-auto\", \"col-auto\", \"my-auto\"], [\"src\", \"../../assets/images/favicon.png\", \"width\", \"115\", \"height\", \"115\", 1, \"img-fluid\", \"my-auto\", \"align-self-center\", \"rounded\"], [1, \"col-auto\", \"my-auto\"], [1, \"mb-0\", \"font-weight-bold\"], [1, \"col-auto\", \"my-auto\", \"ml-auto\"], [1, \"display-3\"], [1, \"row\", \"mb-1\", \"mt-5\", \"mt-md-0\"], [1, \"col-md-6\", \"mx-auto\", \"border-0\", \"rounded-pill\", \"p-2\", \"text-white\", \"text-bold\", \"bg-primary\", \"letter-spacing-1\", 3, \"click\"], [1, \"row\"], [1, \"col\"], [1, \"card\", \"card-2\"], [1, \"media\"], [1, \"sq\", \"align-self-center\"], [\"width\", \"135\", \"height\", \"135\", 1, \"img-fluid\", \"my-auto\", \"align-self-center\", \"mr-2\", \"mr-md-4\", \"pl-0\", \"p-0\", \"m-0\", 3, \"src\"], [1, \"media-body\", \"my-auto\", \"text-right\"], [1, \"row\", \"my-auto\", \"flex-column\", \"flex-md-row\"], [\"type\", \"number\", 1, \"w-50\", 3, \"ngModel\", \"ngModelChange\"], [1, \"my-3\"], [1, \"col-md-3\", \"mb-3\"], [1, \"cursor-pointer\", 3, \"click\"], [1, \"mr-2\", \"fa\", \"fa-trash-alt\", \"cursor-pointer\"]],\n    template: function CardsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CardsComponent_app_preload_0_Template, 1, 0, \"app-preload\", 0);\n        i0.ɵɵelementStart(1, \"h3\", 1);\n        i0.ɵɵtext(2, \"Orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, CardsComponent_div_3_Template, 3, 0, \"div\", 2);\n        i0.ɵɵtemplate(4, CardsComponent_div_4_Template, 31, 5, \"div\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.preload);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isUserCheck);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isUserCheck);\n      }\n    },\n    dependencies: [i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.NgControlStatus, i7.NgModel, i8.NgForOf, i8.NgIf, i9.PreloadComponent, i8.CurrencyPipe],\n    styles: [\"body[_ngcontent-%COMP%]{min-height:100vh;background-size:cover;font-family:Lato,sans-serif;color:#747474aa;background:linear-gradient(140deg,#fff,50%,#7068c8)}.container-fluid[_ngcontent-%COMP%]{margin-top:200px}p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:7px}.small[_ngcontent-%COMP%]{letter-spacing:.5px!important}.card-1[_ngcontent-%COMP%]{box-shadow:2px 2px 10px #786cbe}hr[_ngcontent-%COMP%]{background-color:#f8f8f8aa}.bold[_ngcontent-%COMP%]{font-weight:500}.change-color[_ngcontent-%COMP%]{color:#00f!important}.card-2[_ngcontent-%COMP%]{box-shadow:1px 1px 3px #70738b}.fa-circle.active[_ngcontent-%COMP%]{font-size:8px;color:#5747bc}.fa-circle[_ngcontent-%COMP%]{font-size:8px;color:#aaa}.rounded[_ngcontent-%COMP%]{border-radius:2.25rem!important}.progress-bar[_ngcontent-%COMP%]{background-color:#5747bc!important}.progress[_ngcontent-%COMP%]{height:5px!important;margin-bottom:0}.invoice[_ngcontent-%COMP%]{position:relative;top:-70px}.Glasses[_ngcontent-%COMP%]{position:relative;top:-12px!important}.card-footer[_ngcontent-%COMP%]{background-color:#20f;color:#fff}h2[_ngcontent-%COMP%]{color:#000;letter-spacing:2px!important}.display-3[_ngcontent-%COMP%]{font-weight:500!important}@media (max-width: 479px){.invoice[_ngcontent-%COMP%]{position:relative;top:7px}.border-line[_ngcontent-%COMP%]{border-right:0px solid rgb(206,206,226)!important}}@media (max-width: 700px){h2[_ngcontent-%COMP%]{color:#03005c;font-size:17px}.display-3[_ngcontent-%COMP%]{font-size:28px;font-weight:500!important}}.card-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{letter-spacing:7px!important;font-size:12px}.border-line[_ngcontent-%COMP%]{border-right:1px solid rgb(206,206,226)}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important}.letter-spacing-1[_ngcontent-%COMP%]{letter-spacing:1px!important}\"]\n  });\n  return CardsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}